import{j as e}from"./radix-ui-BhA1LbKn.js";import{r as s,h as a}from"./react-vendor-B1bUijmx.js";import{c as t,s as r,L as l,B as i,X as o,t as n}from"./index-CRPRT7Ob.js";import{B as d}from"./badge-BBGM62l1.js";import{D as c,a as m}from"./dialog-DFBG-Wmc.js";import{T as x,a as h,b as u}from"./tabs-CN3XS-3r.js";import{I as f}from"./input-BBdXW6UI.js";import{S as g}from"./search-B2AIdtL9.js";import{C as j}from"./calendar-B1DUrkPc.js";import{I as p}from"./image-DYLKVTmU.js";import{C as v}from"./copy-CLjfj3WK.js";import"./supabase-C_IPIGZD.js";import"./utils-DjG4pwKl.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=t("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function b(){const[t,b]=s.useState([]),[N,w]=s.useState(!0),[k,C]=s.useState("All"),[S,L]=s.useState(""),[A,_]=s.useState(null),[z,D]=a();s.useEffect(()=>{I()},[]),s.useEffect(()=>{const e=z.get("id");if(e&&t.length>0&&!A){const s=t.find(s=>s.id===e);s&&_(s)}},[t,z]);const G=()=>{_(null),z.delete("id"),D(z)},I=async()=>{try{w(!0);const{data:e,error:s}=await r.from("gallery_items").select("*").order("event_date",{ascending:!1});if(s)throw s;b(e||[])}catch(e){}finally{w(!1)}},T=["All",...Array.from(new Set(t.map(e=>e.category||"General"))).sort()],V=t.filter(e=>{var s;const a="All"===k||e.category===k,t=e.title.toLowerCase().includes(S.toLowerCase())||(null==(s=e.description)?void 0:s.toLowerCase().includes(S.toLowerCase()));return a&&t}),B=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"";return N?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(l,{size:"md",className:"mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading gallery..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4 max-w-3xl mx-auto",children:[e.jsx(d,{variant:"secondary",className:"mb-2",children:"Our Memories"}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-primary tracking-tight",children:"NUGSA Gallery"}),e.jsx("p",{className:"text-xl text-muted-foreground font-light",children:"Capturing the moments that define our community, from cultural celebrations to academic achievements."})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 bg-white p-4 rounded-xl shadow-sm border",children:[e.jsx("div",{className:"w-full md:w-auto overflow-x-auto pb-2 md:pb-0",children:e.jsx(x,{defaultValue:"All",value:k,onValueChange:C,children:e.jsx(h,{className:"bg-muted/50",children:T.map(s=>e.jsx(u,{value:s,className:"px-4",children:s},s))})})}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(f,{placeholder:"Search memories...",value:S,onChange:e=>L(e.target.value),className:"pl-10"})]})]}),V.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:V.map(s=>e.jsxs("div",{className:"group relative bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 cursor-pointer border border-gray-100",onClick:()=>(e=>{_(e),D({id:e.id})})(s),children:[e.jsxs("div",{className:"aspect-[4/3] overflow-hidden bg-gray-100",children:[e.jsx("img",{src:s.image_url,alt:s.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:e.jsxs(i,{variant:"secondary",size:"sm",className:"gap-2",children:[e.jsx(y,{className:"w-4 h-4"})," View"]})})]}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{variant:"outline",className:"text-xs font-normal",children:s.category}),s.event_date&&e.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(j,{className:"w-3 h-3"}),B(s.event_date)]})]}),e.jsx("h3",{className:"font-semibold text-foreground line-clamp-1 group-hover:text-primary transition-colors",children:s.title})]})]},s.id))}):e.jsxs("div",{className:"text-center py-20 bg-white rounded-xl border border-dashed",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(p,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium text-foreground",children:"No photos found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your filters or search terms"}),e.jsx(i,{variant:"link",onClick:()=>{L(""),C("All")},children:"Clear filters"})]}),e.jsx(c,{open:!!A,onOpenChange:e=>!e&&G(),children:e.jsx(m,{className:"max-w-4xl p-0 overflow-hidden bg-transparent border-none shadow-none md:max-h-[85vh]",children:e.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden flex flex-col md:flex-row h-full max-h-[80vh] md:max-h-[85vh]",children:[e.jsx("div",{className:"flex-1 bg-black flex items-center justify-center overflow-hidden",children:A&&e.jsx("img",{src:A.image_url,alt:A.title,className:"w-full h-full object-contain max-h-[85vh]"})}),e.jsx("div",{className:"w-full md:w-80 bg-white p-6 md:h-full overflow-y-auto flex-shrink-0",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(d,{children:null==A?void 0:A.category}),e.jsx("button",{onClick:G,className:"md:hidden text-muted-foreground hover:text-foreground p-1",children:e.jsx(o,{className:"w-5 h-5"})})]}),e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:null==A?void 0:A.title}),(null==A?void 0:A.event_date)&&e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2 mb-4",children:[e.jsx(j,{className:"w-4 h-4"}),B(A.event_date)]})]}),(null==A?void 0:A.description)&&e.jsx("div",{className:"prose prose-sm text-muted-foreground",children:e.jsx("p",{children:A.description})}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-2 font-medium",children:"Share"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(i,{size:"sm",variant:"outline",className:"w-full gap-2",onClick:()=>{if(A){const e=`${window.location.origin}/gallery?id=${A.id}`;navigator.clipboard.writeText(e),n({title:"Copied!",description:"Link copied to clipboard"})}},children:[e.jsx(v,{className:"w-4 h-4"}),"Copy Link"]})})]})]})}),e.jsx("button",{onClick:G,className:"absolute top-4 right-4 text-white/70 hover:text-white bg-black/50 p-2 rounded-full backdrop-blur-sm hidden md:block transition-colors",children:e.jsx(o,{className:"w-5 h-5"})})]})})})]})})}export{b as default};
