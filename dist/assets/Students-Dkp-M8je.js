import{j as e}from"./radix-ui-C_30fW44.js";import{r as s,u as a}from"./react-vendor-BPKX_lDx.js";import{c as t,u as r,s as i,t as l,C as n,d as c,M as d,a as o,e as m,B as x,U as h,f as u}from"./index-ZrmUALcR.js";import{I as j}from"./input-B4xn1GWc.js";import{S as p,a as f,b as g,c as y,d as N}from"./select-BgFOHVXi.js";import{A as v,a as w,b}from"./avatar-DlUzrqvh.js";import{B as _}from"./badge-DVt49irY.js";import{U as k}from"./users-DjGvqPV5.js";import{G as C}from"./graduation-cap-C7YPIDn9.js";import{S}from"./search-Bw7-y7Fb.js";import{L}from"./linkedin-z-wUVEBZ.js";import"./supabase-bi29EmR8.js";import"./utils-DDMI54vX.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=t("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);function $(){const[t,$]=s.useState([]),[U,A]=s.useState([]),[M,q]=s.useState(!0),[B,E]=s.useState(""),[F,I]=s.useState("all"),[Y,z]=s.useState("all"),[T,V]=s.useState("all"),{user:J}=r(),P=a();s.useEffect(()=>{R()},[]),s.useEffect(()=>{D()},[t,B,F,Y,T]);const R=async()=>{try{const{data:e,error:s}=await i.from("profiles").select("*").eq("role","student").eq("is_verified",!0).order("first_name",{ascending:!0});if(s)throw s;e&&$(e),q(!1)}catch(e){l({title:"Error",description:"There was an error fetching the student directory. Please try again later.",variant:"destructive"}),q(!1)}},D=()=>{let e=t;B&&(e=e.filter(e=>{var s,a,t;return`${e.first_name} ${e.last_name}`.toLowerCase().includes(B.toLowerCase())||(null==(s=e.university)?void 0:s.toLowerCase().includes(B.toLowerCase()))||(null==(a=e.major)?void 0:a.toLowerCase().includes(B.toLowerCase()))||(null==(t=e.current_city)?void 0:t.toLowerCase().includes(B.toLowerCase()))})),"all"!==F&&(e=e.filter(e=>e.university.toLowerCase()===F.toLowerCase())),"all"!==Y&&(e=e.filter(e=>e.india_state.toLowerCase()==Y.toLowerCase())),"all"!==T&&(e=e.filter(e=>e.ghana_region.toLowerCase()===T.toLowerCase())),A(e)},H=e=>{const s=new Set,a=[];return t.forEach(t=>{const r=t[e];if("string"==typeof r&&""!==r.trim()){const e=r.toLowerCase().trim();s.has(e)||(s.add(e),a.push(r))}}),a.sort()};return M?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-primary/20 border-t-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading student directory..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"section-container py-12 space-y-10",children:[e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center",children:e.jsx(k,{className:"w-8 h-8 text-primary"})})}),e.jsxs("div",{className:"max-w-3xl mx-auto space-y-4",children:[e.jsx("h1",{className:"heading-1",children:"Student Directory"}),e.jsx("p",{className:"body-large text-muted-foreground",children:"Connect with NUGSA-Germany members across universities and German states. Build professional networks and support each other throughout your academic journey."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(n,{className:"professional-card-elevated",children:e.jsxs(c,{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm uppercase tracking-wide text-muted-foreground",children:"Total Students"}),e.jsx("p",{className:"text-3xl font-bold text-primary mt-2",children:t.length})]}),e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(k,{className:"w-6 h-6 text-primary"})})]})}),e.jsx(n,{className:"professional-card-elevated",children:e.jsxs(c,{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm uppercase tracking-wide text-muted-foreground",children:"Universities"}),e.jsx("p",{className:"text-3xl font-bold text-secondary mt-2",children:H("university").length})]}),e.jsx("div",{className:"w-12 h-12 bg-secondary/10 rounded-lg flex items-center justify-center",children:e.jsx(C,{className:"w-6 h-6 text-secondary"})})]})}),e.jsx(n,{className:"professional-card-elevated",children:e.jsxs(c,{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm uppercase tracking-wide text-muted-foreground",children:"German States"}),e.jsx("p",{className:"text-3xl font-bold text-accent mt-2",children:H("india_state").length})]}),e.jsx("div",{className:"w-12 h-12 bg-accent/10 rounded-lg flex items-center justify-center",children:e.jsx(d,{className:"w-6 h-6 text-accent"})})]})})]}),e.jsxs(n,{className:"professional-card-elevated",children:[e.jsx(o,{children:e.jsx(m,{className:"text-center",children:"Search and filter students by name, university, or German state"})}),e.jsx(c,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(j,{placeholder:"Search by name, university, or major",value:B,onChange:e=>E(e.target.value),className:"pl-10 input-professional"})]}),e.jsxs(p,{value:F,onValueChange:I,children:[e.jsx(f,{className:"input-professional",children:e.jsx(g,{placeholder:"Filter by University"})}),e.jsxs(y,{children:[e.jsx(N,{value:"all",children:"All Universities"}),H("university").map(s=>e.jsx(N,{value:s,children:s},s))]})]}),e.jsxs(p,{value:Y,onValueChange:z,children:[e.jsx(f,{className:"input-professional",children:e.jsx(g,{placeholder:"Filter by State"})}),e.jsxs(y,{children:[e.jsx(N,{value:"all",children:"All German States"}),H("india_state").map(s=>e.jsx(N,{value:s,children:s},s))]})]}),e.jsx(x,{variant:"outline",className:"btn-outline",onClick:()=>{E(""),I("all"),z("all"),V("all")},children:"Reset Filters"})]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",e.jsx("span",{className:"font-semibold text-foreground",children:U.length})," of"," ",e.jsx("span",{className:"font-semibold text-foreground",children:t.length})," students"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:U.map(s=>e.jsx(n,{className:"professional-card-elevated overflow-hidden",children:e.jsxs(c,{className:"p-0",children:[e.jsxs("div",{className:"hero-background p-8 text-white text-center",children:[e.jsxs(v,{className:"w-24 h-24 mx-auto mb-4 ring-4 ring-white/20",children:[e.jsx(w,{src:s.profile_image_url||"",alt:`${s.first_name} ${s.last_name}`,className:"object-cover"}),e.jsxs(b,{className:"text-lg bg-white/20 text-white",children:[s.first_name[0],s.last_name[0]]})]}),e.jsxs("h3",{className:"text-xl font-bold mb-1",children:[s.first_name," ",s.last_name]}),e.jsx("br",{}),e.jsx("div",{className:"flex justify-center",children:s.gender&&e.jsx(_,{variant:"secondary",className:"backdrop-blur-sm bg-white/10 text-white border-white/20 flex items-center gap-3 shadow-lg justify-center",children:e.jsxs("span",{className:"flex items-center gap-1 text-sm",children:[e.jsx(h,{className:"w-5 h-5"}),s.gender]})})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[s.major&&e.jsxs("div",{className:"flex items-start text-sm text-muted-foreground",children:[e.jsx(C,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0 text-primary"}),e.jsx("span",{className:"break-words whitespace-normal",children:s.major})]}),s.university&&e.jsxs("div",{className:"flex items-start text-sm text-muted-foreground",children:[e.jsx(G,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0 text-secondary"}),e.jsxs("span",{className:"break-words whitespace-normal",children:[s.university," ",s.level_of_study?`(${s.level_of_study})`:""]})]}),s.india_city&&e.jsxs("div",{className:"flex items-start text-sm text-muted-foreground",children:[e.jsx(d,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0 text-accent"}),e.jsxs("span",{className:"break-words whitespace-normal",children:[s.india_city,", ",s.india_state]})]})]}),s.bio&&e.jsx("div",{className:"bg-muted/50 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:s.bio})}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground bg-muted/30 p-2 rounded",children:[e.jsxs("span",{children:[s.level_of_study&&`${s.level_of_study}`,s.year_of_study&&` â€¢ Year ${s.year_of_study}`]}),s.expected_completion_year&&e.jsxs("span",{children:["Graduating ",s.expected_completion_year]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(x,{size:"sm",className:"btn-primary flex-1",onClick:()=>(async(e,s)=>{if(!J)return l({title:"Sign In Required",description:"Please sign in to send messages to other students.",variant:"destructive"}),void P("/auth");e!==J.id?P("/messages",{state:{recipientId:e,recipientName:s}}):l({title:"Cannot Message Yourself",description:"You cannot send a message to yourself.",variant:"destructive"})})(s.id,`${s.first_name} ${s.last_name}`),children:[e.jsx(u,{className:"w-4 h-4 mr-1"}),"Message"]}),s.linkedin_url&&e.jsx(x,{size:"sm",variant:"outline",asChild:!0,children:e.jsx("a",{href:s.linkedin_url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(L,{className:"w-4 h-4"})})})]})]})]})},s.id))}),0===U.length&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-muted-foreground mb-6",children:e.jsx(S,{className:"w-16 h-16 mx-auto opacity-40"})}),e.jsx("h3",{className:"heading-3 mb-3",children:"No students found"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"Try adjusting your search terms or filter criteria to find the students you're looking for."}),e.jsx(x,{variant:"outline",className:"mt-6 btn-outline",onClick:()=>{E(""),I("all"),z("all"),V("all")},children:"Clear Filters"})]}),!J&&U.length>0&&e.jsx(n,{className:"professional-card-elevated bg-white",children:e.jsxs(c,{className:"p-10 text-center space-y-4",children:[e.jsx("h3",{className:"heading-3",children:"Join the NUGSA-Germany Network"}),e.jsx("p",{className:"body-large text-muted-foreground max-w-2xl mx-auto",children:"Create an account to connect directly with members, send messages, and access exclusive resources."}),e.jsx(x,{size:"lg",className:"btn-primary px-8",onClick:()=>P("/auth"),children:"Create Your Account"})]})})]})})}export{$ as default};
