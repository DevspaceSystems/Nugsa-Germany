import{j as e}from"./radix-ui-C_30fW44.js";import{u as s,r}from"./react-vendor-BPKX_lDx.js";import{c as a,u as i,i as n,s as t,U as l,C as d,a as o,b as c,e as h,d as m,B as u}from"./index-ZrmUALcR.js";import{I as p}from"./input-B4xn1GWc.js";import{L as x}from"./label-BNgmef9v.js";import{T as v}from"./textarea-DWvDu1as.js";import{S as g,a as y,b as j,c as f,d as _}from"./select-BgFOHVXi.js";import{A as b,a as U,b as N}from"./avatar-DlUzrqvh.js";import{D as w}from"./react-datepicker-vODiH943.js";import{U as S,a as C,E as F}from"./upload-Bhq4sjmX.js";import"./supabase-bi29EmR8.js";import"./utils-DDMI54vX.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=a("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),A=a("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),k=a("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),P=["RWTH Aachen University","TU Berlin - Technical University of Berlin","TU Braunschweig - Technical University of Braunschweig","TU Darmstadt - Technical University of Darmstadt","TU Dresden - Technical University of Dresden","Leibniz University Hannover","Karlsruhe Institute of Technology (KIT)","TU München - Technical University of Munich","University of Stuttgart","Freie Universität Berlin (Free University of Berlin)","Humboldt University of Berlin","Ludwig Maximilian University of Munich (LMU)","Heidelberg University","University of Freiburg","University of Göttingen","University of Hamburg","University of Cologne","University of Frankfurt","University of Bonn","University of Münster","University of Tübingen","University of Würzburg","University of Leipzig","University of Mainz","University of Erlangen-Nuremberg","University of Konstanz","University of Mannheim","University of Regensburg","University of Ulm","Munich University of Applied Sciences","Frankfurt University of Applied Sciences","Hamburg University of Applied Sciences","Cologne University of Applied Sciences","Berlin University of Applied Sciences (HTW Berlin)","Darmstadt University of Applied Sciences","Esslingen University of Applied Sciences","Karlsruhe University of Applied Sciences","Mannheim University of Applied Sciences","Nuremberg Tech","Aachen University of Applied Sciences","Bonn-Rhein-Sieg University of Applied Sciences","Bremen University of Applied Sciences","Dortmund University of Applied Sciences","Düsseldorf University of Applied Sciences","Hannover University of Applied Sciences","Kiel University of Applied Sciences","Lübeck University of Applied Sciences","Magdeburg-Stendal University of Applied Sciences","Mittweida University of Applied Sciences","Osnabrück University of Applied Sciences","Pforzheim University","Reutlingen University","Rosenheim Technical University of Applied Sciences","Stralsund University of Applied Sciences","Wiesbaden University of Applied Sciences","Wismar University of Applied Sciences","University of Augsburg","University of Bamberg","University of Bayreuth","Bielefeld University","Ruhr University Bochum","University of Bremen","Chemnitz University of Technology","TU Clausthal - Clausthal University of Technology","University of Duisburg-Essen","University of Düsseldorf","University of Greifswald","University of Halle-Wittenberg","University of Hohenheim","TU Ilmenau - Ilmenau University of Technology","University of Jena","University of Kaiserslautern","University of Kassel","University of Kiel","University of Koblenz-Landau","University of Lüneburg","University of Marburg","University of Oldenburg","University of Osnabrück","University of Paderborn","University of Passau","University of Potsdam","University of Rostock","Saarland University","University of Siegen","University of Trier","University of Vechta","University of Wuppertal","German Sport University Cologne","University of Music and Performing Arts Munich","Berlin University of the Arts","Hamburg University of Music and Theatre","Bauhaus University Weimar","Jacobs University Bremen","Zeppelin University","WHU - Otto Beisheim School of Management","ESMT Berlin","Frankfurt School of Finance & Management","Hertie School","Bucerius Law School","Charité - Universitätsmedizin Berlin","Hannover Medical School","Medical University of Lübeck","Other"].sort();
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function B(){var a;const{user:B}=i(),{toast:T}=n(),D=s(),[I,E]=r.useState(null),[Y,H]=r.useState(!0),[L,z]=r.useState(!1),[W,G]=r.useState(!1),[R,K]=r.useState(!1),[V,O]=r.useState(""),[$,q]=r.useState(""),[J,Q]=r.useState("");r.useState(!1);const[Z,X]=r.useState(!1),[ee,se]=r.useState(!1);r.useEffect(()=>{if(!B){const e=setTimeout(()=>{D("/auth")},3e3);return()=>clearTimeout(e)}re()},[B,D]);const re=async()=>{if(!B)return;const{data:e,error:s}=await t.from("profiles").select("*").eq("id",B.id).single();e&&!s&&E(e),H(!1)},ae=(e,s)=>{I&&E({...I,[e]:s})},ie=async(e,s)=>{if(B){G(!0);try{const r="profile"===s?"profile-pictures":"documents",a=`${B.id}/${s}_${Date.now()}.${e.name.split(".").pop()}`,{error:i}=await t.storage.from(r).upload(a,e);if(i)throw i;const{data:n}=t.storage.from(r).getPublicUrl(a);ae("profile"===s?"profile_image_url":"passport_document_url",n.publicUrl),T({title:"Success",description:`Click on save button to save your ${"profile"===s?"Profile picture":"Passport document"} !`})}catch(r){T({title:"Error",description:"Failed to upload file. Please try again.",variant:"destructive"})}finally{G(!1)}}};return B?Y?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})}):I?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50/30 to-pink-50/30",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"neon-card p-6 text-center pulse-glow",children:[e.jsxs("h3",{className:"text-xl font-semibold gradient-text mb-6 flex items-center justify-center",children:[e.jsx(M,{className:"w-5 h-5 mr-2"}),"Profile Photo"]}),e.jsxs("div",{className:"relative group",children:[e.jsxs(b,{className:"w-40 h-40 mx-auto mb-6 border-4 border-purple-200 shadow-lg transition-all duration-300 group-hover:border-purple-400",children:[e.jsx(U,{src:I.profile_image_url||"",alt:"Profile",className:"object-cover"}),e.jsx(N,{className:"text-3xl bg-gradient-to-br from-purple-100 to-pink-100",children:e.jsx(l,{className:"w-20 h-20 text-purple-600"})})]}),e.jsx("div",{className:"absolute -bottom-2 -right-2 w-12 h-12 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center cursor-pointer shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110",children:e.jsx(M,{className:"w-6 h-6 text-white"})})]}),e.jsx("input",{type:"file",id:"profile-image",accept:"image/*",className:"hidden",onChange:e=>{var s;const r=null==(s=e.target.files)?void 0:s[0];r&&ie(r,"profile")}}),e.jsx("button",{className:"neon-button w-full mb-4",onClick:()=>{var e;return null==(e=document.getElementById("profile-image"))?void 0:e.click()},disabled:W,children:W?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Upload New Photo"]})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"JPG, PNG or GIF (max 1MB)"})]})}),e.jsxs("div",{className:"lg:col-span-3 space-y-8",children:[e.jsxs("div",{className:"neon-card p-8",children:[e.jsx("h3",{className:"text-2xl font-bold gradient-text mb-2",children:"Personal Information"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Your basic personal details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"first_name",className:"text-sm font-medium text-foreground",children:"First Name"}),e.jsx(p,{id:"first_name",value:I.first_name,onChange:e=>ae("first_name",e.target.value),className:"neon-input"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"last_name",className:"text-sm font-medium text-foreground",children:"Last Name"}),e.jsx(p,{id:"last_name",value:I.last_name,onChange:e=>ae("last_name",e.target.value),className:"neon-input"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"email",children:"Email"}),e.jsx(p,{id:"email",value:I.email,disabled:!0,className:"bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"india_phone",children:"Phone Number (Germany)"}),e.jsx(p,{id:"india_phone",value:I.india_phone||"",onChange:e=>ae("india_phone",e.target.value),placeholder:"+49 1512 3456789"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"ghana_mobile_number",children:"Ghana Mobile Number"}),e.jsx(p,{id:"ghana_mobile_number",value:I.ghana_mobile_number||"",onChange:e=>ae("ghana_mobile_number",e.target.value),placeholder:"+233 24 123 4567"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"gender",children:"Gender"}),e.jsxs(g,{value:I.gender||"",onValueChange:e=>ae("gender",e),children:[e.jsx(y,{children:e.jsx(j,{placeholder:"Select gender"})}),e.jsxs(f,{children:[e.jsx(_,{value:"Male",children:"Male"}),e.jsx(_,{value:"Female",children:"Female"}),e.jsx(_,{value:"Other",children:"Other"}),e.jsx(_,{value:"Prefer not to say",children:"Prefer not to say"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"marital_status",children:"Marital Status"}),e.jsxs(g,{value:I.marital_status||"",onValueChange:e=>ae("marital_status",e),children:[e.jsx(y,{children:e.jsx(j,{placeholder:"Select status"})}),e.jsxs(f,{children:[e.jsx(_,{value:"Single",children:"Single"}),e.jsx(_,{value:"Married",children:"Married"}),e.jsx(_,{value:"Divorced",children:"Divorced"}),e.jsx(_,{value:"Widowed",children:"Widowed"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"date_of_birth",children:"Date of Birth"}),e.jsx(w,{selected:I.date_of_birth?new Date(I.date_of_birth):null,onChange:e=>ae("date_of_birth",e?e.toISOString().split("T")[0]:null),dateFormat:"yyyy-MM-dd",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholderText:"Select date of birth",showYearDropdown:!0,yearDropdownItemNumber:100,scrollableYearDropdown:!0})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"whatsapp_number",children:"WhatsApp Number"}),e.jsx(p,{id:"whatsapp_number",value:I.whatsapp_number||"",onChange:e=>ae("whatsapp_number",e.target.value),placeholder:"+233 24 123 4567"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"linkedin_url",children:"LinkedIn URL"}),e.jsx(p,{id:"linkedin_url",value:I.linkedin_url||"",onChange:e=>ae("linkedin_url",e.target.value),placeholder:"https://linkedin.com/in/yourprofile"})]})]})]}),e.jsxs("div",{className:"neon-card p-8",children:[e.jsx("h3",{className:"text-2xl font-bold gradient-text mb-2",children:"Academic Information"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Your educational details in Germany"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"level_of_study",children:"Level of Study"}),e.jsxs(g,{value:I.level_of_study||"",onValueChange:e=>ae("level_of_study",e),children:[e.jsx(y,{children:e.jsx(j,{placeholder:"Select level"})}),e.jsxs(f,{children:[e.jsx(_,{value:"Diploma",children:"Diploma"}),e.jsx(_,{value:"Bachelor's",children:"Bachelor's"}),e.jsx(_,{value:"Master's",children:"Master's"}),e.jsx(_,{value:"PhD",children:"PhD"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"year_of_enrollment",children:"Year of Enrollment"}),e.jsx(p,{id:"year_of_enrollment",type:"number",value:I.year_of_enrollment||"",onChange:e=>ae("year_of_enrollment",parseInt(e.target.value)),placeholder:"2020"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"expected_completion_year",children:"Expected Completion Year"}),e.jsx(p,{id:"expected_completion_year",type:"number",value:I.expected_completion_year||"",onChange:e=>ae("expected_completion_year",parseInt(e.target.value)),placeholder:"2024"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"university",children:"University/Institution"}),e.jsxs(g,{value:I.university||"",onValueChange:e=>ae("university",e),children:[e.jsx(y,{children:e.jsx(j,{placeholder:"Select your university"})}),e.jsx(f,{className:"max-h-[300px]",children:P.map(s=>e.jsx(_,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"major",children:"Major/Course"}),e.jsx(p,{id:"major",value:I.major||"",onChange:e=>ae("major",e.target.value),placeholder:"e.g., Computer Science"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"year_of_study",children:"Current Year of Study"}),e.jsxs(g,{value:(null==(a=I.year_of_study)?void 0:a.toString())||"",onValueChange:e=>ae("year_of_study",parseInt(e)),children:[e.jsx(y,{children:e.jsx(j,{placeholder:"Select year"})}),e.jsxs(f,{children:[e.jsx(_,{value:"1",children:"1st Year"}),e.jsx(_,{value:"2",children:"2nd Year"}),e.jsx(_,{value:"3",children:"3rd Year"}),e.jsx(_,{value:"4",children:"4th Year"}),e.jsx(_,{value:"5",children:"5th Year"}),e.jsx(_,{value:"6",children:"6th Year"}),e.jsx(_,{value:"7",children:"7th Year"}),e.jsx(_,{value:"8",children:"8th Year"}),e.jsx(_,{value:"9",children:"9th Year"}),e.jsx(_,{value:"10",children:"10th Year"})]})]})]})]})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsx(c,{className:"text-2xl font-bold gradient-text mb-2",children:"Address Information"}),e.jsx(h,{children:"Your current and permanent addresses"})]}),e.jsxs(m,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"German Address"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"india_address",children:"Street Address"}),e.jsx(p,{id:"india_address",value:I.india_address||"",onChange:e=>ae("india_address",e.target.value),placeholder:"123 Main Street"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"india_city",children:"City"}),e.jsx(p,{id:"india_city",value:I.india_city||"",onChange:e=>ae("india_city",e.target.value),placeholder:"Berlin"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"india_state",children:"State"}),e.jsx(p,{id:"india_state",value:I.india_state||"",onChange:e=>ae("india_state",e.target.value),placeholder:"Berlin"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"india_pincode",children:"Postal Code"}),e.jsx(p,{id:"india_pincode",value:I.india_pincode||"",onChange:e=>ae("india_pincode",e.target.value),placeholder:"10115"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Ghanaian Address"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"ghana_address",children:"Street Address"}),e.jsx(p,{id:"ghana_address",value:I.ghana_address||"",onChange:e=>ae("ghana_address",e.target.value),placeholder:"123 Main Street"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"ghana_region",children:"State/Region"}),e.jsx(p,{id:"ghana_region",value:I.ghana_region||"",onChange:e=>ae("ghana_region",e.target.value),placeholder:"Accra"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"ghana_city",children:"City"}),e.jsx(p,{id:"ghana_city",value:I.ghana_city||"",onChange:e=>ae("ghana_city",e.target.value),placeholder:"Suyane"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"ghana_pincode",children:"Postal Code"}),e.jsx(p,{id:"ghana_pincode",value:I.ghana_pincode||"",onChange:e=>ae("ghana_pincode",e.target.value),placeholder:"GA-123-4567"})]})]})]})]})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsx(c,{className:"text-2xl font-bold gradient-text mb-2",children:"Emergency Contact"}),e.jsx(h,{children:"Emergency contact information"})]}),e.jsxs(m,{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"emergency_name",children:"Full Name"}),e.jsx(p,{id:"emergency_name",value:I.emergency_contact_name||"",onChange:e=>ae("emergency_contact_name",e.target.value),placeholder:"John Doe"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"emergency_relationship",children:"Relationship"}),e.jsx(p,{id:"emergency_relationship",value:I.emergency_contact_relationship||"",onChange:e=>ae("emergency_contact_relationship",e.target.value),placeholder:"Father, Mother, Sibling, etc."})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"emergency_number",children:"Contact Number"}),e.jsx(p,{id:"emergency_number",value:I.emergency_contact_number||"",onChange:e=>ae("emergency_contact_number",e.target.value),placeholder:"+233 24 123 4567"})]})]})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsx(c,{className:"text-2xl font-bold gradient-text mb-2",children:"Document Uploads"}),e.jsx(h,{children:"Upload your passport and other documents"})]}),e.jsx(m,{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(x,{htmlFor:"passport",children:"Passport Document"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx("input",{type:"file",id:"passport-document",accept:".pdf,image/*",className:"hidden",onChange:e=>{var s;const r=null==(s=e.target.files)?void 0:s[0];r&&r.size<=2097152?ie(r,"passport"):T({title:"Error",description:"File size must be less than 2MB",variant:"destructive"})}}),e.jsx(u,{variant:"outline",onClick:()=>{var e;return null==(e=document.getElementById("passport-document"))?void 0:e.click()},disabled:W,children:W?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-2"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Upload Passport"]})}),I.passport_document_url&&e.jsxs(u,{variant:"ghost",size:"sm",onClick:()=>window.open(I.passport_document_url,"_blank"),children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"View Document"]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"PDF or Image file (max 2MB)"})]})})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsx(c,{className:"text-2xl font-bold gradient-text mb-2",children:"About Me"}),e.jsx(h,{children:"Tell other students about yourself"})]}),e.jsx(m,{children:e.jsx(v,{value:I.bio||"",onChange:e=>ae("bio",e.target.value),placeholder:"Write a brief bio about yourself, your interests, goals, etc.",rows:4})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:async()=>{if(!I||!B)return;z(!0);const{error:e}=await t.from("profiles").update({first_name:I.first_name,last_name:I.last_name,phone:I.phone,gender:I.gender,marital_status:I.marital_status,date_of_birth:I.date_of_birth,ghana_mobile_number:I.ghana_mobile_number,level_of_study:I.level_of_study,year_of_enrollment:I.year_of_enrollment,expected_completion_year:I.expected_completion_year,university:I.university,major:I.major,year_of_study:I.year_of_study,graduation_year:I.graduation_year,current_city:I.current_city,current_state:I.current_state,hometown:I.hometown,ghana_address:I.ghana_address,ghana_city:I.ghana_city,ghana_region:I.ghana_region,ghana_pincode:I.ghana_pincode,current_address_street:I.current_address_street,current_address_city:I.current_address_city,current_address_state:I.current_address_state,current_address_postal_code:I.current_address_postal_code,permanent_address_street:I.permanent_address_street,permanent_address_city:I.permanent_address_city,permanent_address_state:I.permanent_address_state,permanent_address_postal_code:I.permanent_address_postal_code,same_as_current_address:I.same_as_current_address,emergency_contact_name:I.emergency_contact_name,emergency_contact_relationship:I.emergency_contact_relationship,emergency_contact_number:I.emergency_contact_number,linkedin_url:I.linkedin_url,whatsapp_number:I.whatsapp_number,bio:I.bio,profile_image_url:I.profile_image_url,passport_document_url:I.passport_document_url,india_phone:I.india_phone,india_state:I.india_state,india_city:I.india_city,india_address:I.india_address,india_pincode:I.india_pincode}).eq("id",B.id);T(e?{title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"}:{title:"Success",description:"Profile updated successfully!"}),z(!1)},disabled:L,className:"neon-button px-12 py-4 text-lg font-semibold min-w-48",children:L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Saving Changes..."]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-5 h-5 mr-3"})," Update Profile"]})})}),e.jsxs("div",{className:"neon-card p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold gradient-text mb-6 flex items-center justify-center",children:[e.jsx(A,{className:"w-5 h-5 mr-2"}),"Update Password"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"new-password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{id:"new-password",type:Z?"text":"password",value:$,onChange:e=>q(e.target.value),className:"neon-input pr-10"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>X(!Z),children:Z?e.jsx(F,{className:"h-4 w-4 text-gray-400"}):e.jsx(C,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"confirm-password",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{id:"confirm-password",type:ee?"text":"password",value:J,onChange:e=>Q(e.target.value),className:"neon-input pr-10"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>se(!ee),children:ee?e.jsx(F,{className:"h-4 w-4 text-gray-400"}):e.jsx(C,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsx(u,{onClick:async()=>{if(B)if($===J)if($.length<6)T({title:"Error",description:"Password must be at least 6 characters long",variant:"destructive"});else{K(!0);try{const{error:e}=await t.auth.signInWithPassword({email:B.email,password:V}),{error:s}=await t.auth.updateUser({password:$});if(s)throw s;T({title:"Success",description:"Password updated successfully!"}),O(""),q(""),Q("")}catch(e){T({title:"Error",description:"Failed to update password. Please try again.",variant:"destructive"})}finally{K(!1)}}else T({title:"Error",description:"New passwords don't match",variant:"destructive"})},disabled:R||!$||!J,className:"w-full neon-button",children:R?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Update Password"]})})]})]})]})]})})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Profile Not Found"}),e.jsx("p",{className:"text-gray-600",children:"Unable to load your profile information."})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please sign in to access your profile."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to sign in page in 3 seconds..."})]})})}export{B as default};
