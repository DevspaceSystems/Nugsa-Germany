import{j as e}from"./radix-ui-BhA1LbKn.js";import{u as s,r as t}from"./react-vendor-B1bUijmx.js";import{c as a,u as r,s as n,C as l,b as c,d as i,e as d,g as m,h as o,f as x,B as h}from"./index-CRPRT7Ob.js";import{U as u}from"./users-IBbRgan4.js";import{T as j}from"./trending-up-Hf-5fpBG.js";import{H as f}from"./heart-D7BrZl4m.js";import{C as p}from"./calendar-B1DUrkPc.js";import{B as g}from"./book-open-BXgmONSG.js";import"./supabase-C_IPIGZD.js";import"./utils-DjG4pwKl.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=a("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);function y(){const{user:a}=r(),y=s(),[b,v]=t.useState(null),[w,k]=t.useState([]),[S,C]=t.useState({totalStudents:0,unreadMessages:0,recentAnnouncements:0});t.useEffect(()=>{if(!a){const e=setTimeout(()=>{y("/auth")},3e3);return()=>clearTimeout(e)}A(),_(),M()},[a,y]),t.useEffect(()=>{"admin"===(null==b?void 0:b.role)&&(null==b?void 0:b.is_verified)&&y("/admin-dashboard")},[b,y]);const A=async()=>{if(!a)return;const{data:e,error:s}=await n.from("profiles").select("*").eq("id",a.id).single();e&&!s&&v(e)},_=async()=>{const{data:e,error:s}=await n.from("announcements").select("*").eq("published",!0).order("created_at",{ascending:!1}).limit(5);e&&!s&&(k(e),C(s=>({...s,recentAnnouncements:e.length})))},M=async()=>{const{count:e}=await n.from("profiles").select("*",{count:"exact",head:!0}).eq("is_verified",!0),{count:s}=await n.from("messages").select("*",{count:"exact",head:!0}).eq("recipient_id",null==a?void 0:a.id).is("read_at",null);C(t=>({...t,totalStudents:e||0,unreadMessages:s||0}))},P=e=>{const s={scholarships:"bg-emerald-100 text-emerald-800",jobs:"bg-amber-100 text-amber-800",sports:"bg-rose-100 text-rose-700",events:"bg-slate-100 text-slate-700",general:"bg-gray-100 text-gray-800"};return s[e]||s.general};return a?e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"section-container py-8",children:[e.jsxs("div",{className:"mb-10 slide-up",children:[e.jsxs("h1",{className:"heading-2 mb-2",children:["Welcome back, ",(null==b?void 0:b.first_name)||"Student","! ðŸ‘‹"]}),e.jsx("p",{className:"body-large text-muted-foreground",children:"Here's what's happening in the NUGSA-Germany community today."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-10",children:[e.jsxs(l,{className:"professional-card-elevated",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-semibold text-muted-foreground",children:"Active Students"}),e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(u,{className:"h-5 w-5 text-primary"})})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-3xl font-bold text-primary mb-1",children:S.totalStudents}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Verified members"})]})]}),e.jsxs(l,{className:"professional-card-elevated",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-semibold text-muted-foreground",children:"Unread Messages"}),e.jsx("div",{className:"w-10 h-10 bg-secondary/10 rounded-lg flex items-center justify-center",children:e.jsx(m,{className:"h-5 w-5 text-secondary"})})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-3xl font-bold text-secondary mb-1",children:S.unreadMessages}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"New messages"})]})]}),e.jsxs(l,{className:"professional-card-elevated",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-semibold text-muted-foreground",children:"Recent Updates"}),e.jsx("div",{className:"w-10 h-10 bg-accent/10 rounded-lg flex items-center justify-center",children:e.jsx(o,{className:"h-5 w-5 text-accent"})})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-3xl font-bold text-accent mb-1",children:S.recentAnnouncements}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This week"})]})]}),e.jsxs(l,{className:"professional-card-elevated",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-semibold text-muted-foreground",children:"Profile Status"}),e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(j,{className:"h-5 w-5 text-primary"})})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-3xl font-bold text-foreground mb-1",children:(null==b?void 0:b.is_verified)?"âœ“":"âš¡"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:(null==b?void 0:b.is_verified)?"Verified":"Pending"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(l,{className:"professional-card-elevated",children:[e.jsxs(c,{children:[e.jsxs(i,{className:"flex items-center text-xl",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center mr-3",children:e.jsx(o,{className:"w-5 h-5 text-primary"})}),"Recent Announcements"]}),e.jsx(x,{className:"mt-2",children:"Stay updated with the latest news and opportunities"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"space-y-4",children:w.length>0?w.map(s=>e.jsx("div",{className:"border-l-4 border-primary pl-4 py-2",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:s.content}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${P(s.category)}`,children:s.category}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.created_at||"").toLocaleDateString()})]})]})})},s.id)):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent announcements"})}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx(h,{className:"w-full",variant:"outline",onClick:()=>y("/announcements"),children:"View All Announcements"})})]})]}),e.jsxs(l,{className:"professional-card-elevated",children:[e.jsxs(c,{children:[e.jsxs(i,{className:"flex items-center text-xl",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center mr-3",children:e.jsx(N,{className:"w-5 h-5 text-primary"})}),"Quick Actions"]}),e.jsx(x,{className:"mt-2",children:"Common tasks and features you might need"})]}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(h,{className:"h-20 flex-col",variant:"outline",onClick:()=>y("/students"),children:[e.jsx(u,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Find Students"})]}),e.jsxs(h,{className:"h-20 flex-col",variant:"outline",onClick:()=>y("/messages"),children:[e.jsx(m,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Send Message"})]}),e.jsxs(h,{className:"h-20 flex-col",variant:"outline",onClick:()=>y("/assistance"),children:[e.jsx(f,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Get Support"})]}),e.jsxs(h,{className:"h-20 flex-col",variant:"outline",onClick:()=>y("/announcements"),children:[e.jsx(p,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"View Events"})]})]})})]})]}),b&&!b.is_verified&&e.jsxs(l,{className:"mt-8 border-secondary/30 bg-secondary/5 professional-card-elevated",children:[e.jsx(c,{children:e.jsxs(i,{className:"text-foreground flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-secondary/20 rounded-lg flex items-center justify-center mr-3",children:e.jsx(g,{className:"w-5 h-5 text-secondary"})}),"Complete Your Profile"]})}),e.jsxs(d,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Complete your profile to get verified and access all platform features."}),e.jsx(h,{className:"btn-secondary",onClick:()=>y("/profile"),children:"Update Profile"})]})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please sign in to access your dashboard."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to sign in page in 3 seconds..."})]})})}export{y as default};
