import{j as e}from"./radix-ui-C_30fW44.js";import{r as s}from"./react-vendor-BPKX_lDx.js";import{c as t,s as a,g as r,C as l,d as n,B as c,X as i,h as o}from"./index-ZrmUALcR.js";import{B as d}from"./badge-DVt49irY.js";import{S as m,a as x,b as h,c as u,d as g}from"./select-BgFOHVXi.js";import{I as p}from"./input-B4xn1GWc.js";import{D as j,a as b,b as f,c as v,d as N}from"./dialog-Dz8Dn_er.js";import{S as y}from"./search-Bw7-y7Fb.js";import{T as w}from"./trending-up-CRJSgydq.js";import{S as k}from"./star-Bxwqvz1T.js";import{C}from"./clock-CkwknNyX.js";import{C as S}from"./calendar-Dtp-binz.js";import{P as z}from"./play-DG37usq0.js";import{C as A}from"./chevron-left-DasbKTZk.js";import"./supabase-bi29EmR8.js";import"./utils-DDMI54vX.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=t("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),$=t("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),D=t("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),F=t("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),L=t("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),M=s.memo(({media:t,title:a})=>{const[r,l]=s.useState(0),n=s.useRef([]),[i,m]=s.useState(!1),[x,h]=s.useState(!0),u=t[r],g=s.useCallback(()=>{var e;"video"===u.type&&n.current[r]&&(null==(e=n.current[r])||e.pause()),l(e=>(e+1)%t.length),m(!1)},[r,u.type,t.length]),p=s.useCallback(()=>{var e;"video"===u.type&&n.current[r]&&(null==(e=n.current[r])||e.pause()),l(e=>(e-1+t.length)%t.length),m(!1)},[r,u.type,t.length]),j=s.useCallback(()=>{if("video"===u.type&&n.current[r]){const e=n.current[r];e&&(e.paused?(e.play(),m(!0)):(e.pause(),m(!1)))}},[r,u.type]),b=s.useCallback(()=>{if("video"===u.type&&n.current[r]){const e=n.current[r];e&&(e.muted=!e.muted,h(e.muted))}},[r,u.type]),f=s.useCallback(()=>{m(!1)},[]),v=s.useCallback(()=>{m(!0)},[]),N=s.useCallback(()=>{m(!1)},[]);return 0===t.length?null:e.jsx("div",{className:"relative bg-black overflow-hidden",children:e.jsxs("div",{className:"w-full aspect-video bg-black flex items-center justify-center relative",children:["image"===u.type?e.jsx("img",{src:u.url,alt:`${a} - Image ${r+1}`,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("video",{ref:e=>{n.current[r]=e},src:u.url,className:"w-full h-full object-cover",muted:x,onEnded:f,onPlay:v,onPause:N,playsInline:!0}),"video"===u.type&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{variant:"ghost",size:"icon",className:"bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8",onClick:j,children:i?e.jsx($,{className:"w-4 h-4"}):e.jsx(z,{className:"w-4 h-4"})}),e.jsx(c,{variant:"ghost",size:"icon",className:"bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8",onClick:b,children:x?e.jsx(L,{className:"w-4 h-4"}):e.jsx(F,{className:"w-4 h-4"})})]})})}),"video"===u.type&&!i&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer",onClick:j,children:e.jsx("div",{className:"bg-black/50 rounded-full p-4 hover:bg-black/70 transition-colors",children:e.jsx(z,{className:"w-12 h-12 text-white"})})}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8",onClick:p,children:e.jsx(A,{className:"w-4 h-4"})}),e.jsx(c,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8",onClick:g,children:e.jsx(o,{className:"w-4 h-4"})})]}),t.length>1&&e.jsxs("div",{className:"absolute top-2 left-1/2 transform -translate-x-1/2 bg-black/50 text-white px-2 py-1 rounded-full text-xs",children:[r+1," / ",t.length]}),e.jsx("div",{className:"absolute top-2 right-2",children:"video"===u.type&&e.jsx(d,{variant:"secondary",className:"bg-black/50 text-white border-0",children:"VIDEO"})})]})})});
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function P(){const[t,P]=s.useState([]),[_,E]=s.useState([]),[I,q]=s.useState(!0),[O,U]=s.useState("all"),[V,G]=s.useState(""),[H,B]=s.useState(null),[J,R]=s.useState(!1),[K,W]=s.useState(0),[X,Y]=s.useState(!1),[Q,Z]=s.useState(!0),ee=s.useRef(null);s.useEffect(()=>{se()},[]),s.useEffect(()=>{te()},[t,O,V]);const se=async()=>{const{data:e,error:s}=await a.from("announcements").select("*").eq("published",!0).order("created_at",{ascending:!1});e&&!s&&P(e),q(!1)},te=()=>{let e=t;"all"!==O&&(e=e.filter(e=>e.category===O)),V&&(e=e.filter(e=>e.title.toLowerCase().includes(V.toLowerCase())||e.content.toLowerCase().includes(V.toLowerCase()))),E(e)},ae=e=>{const s={scholarships:"bg-green-100 text-green-800 border-green-200",jobs:"bg-blue-100 text-blue-800 border-blue-200",sports:"bg-orange-100 text-orange-800 border-orange-200",events:"bg-purple-100 text-purple-800 border-purple-200",general:"bg-gray-100 text-gray-800 border-gray-200"};return s[e]||s.general},re=e=>{switch(e){case"scholarships":return"ðŸŽ“";case"jobs":return"ðŸ’¼";case"sports":return"âš½";case"events":return"ðŸŽ‰";default:return"ðŸ“¢"}},le=e=>{const s=new Date(e),t=new Date,a=Math.floor((t.getTime()-s.getTime())/864e5);return 0===a?"Today":1===a?"Yesterday":a<7?`${a} days ago`:s.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},ne=e=>{if(!e.image_url)return[];try{const s=JSON.parse(e.image_url);if(Array.isArray(s))return s.map(e=>({url:e,type:e.match(/\.(mp4|mov|avi|wmv|flv|webm|mkv)$/i)?"video":"image"}))}catch{}const s=e.image_url;return[{url:s,type:s.match(/\.(mp4|mov|avi|wmv|flv|webm|mkv)$/i)?"video":"image"}]},ce=e=>{B(e),W(0),Y(!1),Z(!0),R(!0)},ie=()=>{if(!H)return;const e=ne(H);ee.current&&ee.current.pause(),W(s=>(s+1)%e.length),Y(!1)},oe=()=>{if(!H)return;const e=ne(H);ee.current&&ee.current.pause(),W(s=>(s-1+e.length)%e.length),Y(!1)},de=()=>{if(ee.current){const e=ee.current;e.paused?(e.play(),Y(!0)):(e.pause(),Y(!1))}},me=()=>{if(ee.current){const e=ee.current;e.muted=!e.muted,Z(e.muted)}},xe=()=>{Y(!1)},he=()=>{Y(!0)},ue=()=>{Y(!1)};if(I)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading announcements..."})]})});const ge=_.filter(e=>e.featured),pe=_.filter(e=>!e.featured);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-primary rounded-full",children:e.jsx(r,{className:"w-8 h-8 text-white"})})}),e.jsx("h1",{className:"text-3xl font-bold text-primary mb-2",children:"News & Announcements"}),e.jsx("p",{className:"text-base text-muted-foreground max-w-2xl mx-auto",children:"Stay updated with the latest news, opportunities, and events from the NUGSA-Germany community"})]}),e.jsx(l,{className:"mb-6 border shadow-sm",children:e.jsx(n,{className:"pt-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(y,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(p,{placeholder:"Search announcements...",value:V,onChange:e=>G(e.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(T,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs(m,{value:O,onValueChange:U,children:[e.jsx(x,{className:"w-48",children:e.jsx(h,{placeholder:"Filter by category"})}),e.jsxs(u,{children:[e.jsx(g,{value:"all",children:"All Categories"}),e.jsx(g,{value:"scholarships",children:"ðŸŽ“ Scholarships"}),e.jsx(g,{value:"jobs",children:"ðŸ’¼ Jobs"}),e.jsx(g,{value:"sports",children:"âš½ Sports"}),e.jsx(g,{value:"events",children:"ðŸŽ‰ Events"}),e.jsx(g,{value:"general",children:"ðŸ“¢ General"})]})]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[e.jsx(l,{className:"border shadow-sm",children:e.jsxs(n,{className:"p-3 text-center",children:[e.jsx(w,{className:"w-6 h-6 text-primary mx-auto mb-1"}),e.jsx("div",{className:"text-xl font-bold text-primary",children:_.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Posts"})]})}),e.jsx(l,{className:"border shadow-sm",children:e.jsxs(n,{className:"p-3 text-center",children:[e.jsx(k,{className:"w-6 h-6 text-primary mx-auto mb-1"}),e.jsx("div",{className:"text-xl font-bold text-primary",children:ge.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Featured"})]})}),e.jsx(l,{className:"border shadow-sm",children:e.jsxs(n,{className:"p-3 text-center",children:[e.jsx(D,{className:"w-6 h-6 text-primary mx-auto mb-1"}),e.jsx("div",{className:"text-xl font-bold text-primary",children:new Set(t.map(e=>e.category)).size}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Categories"})]})}),e.jsx(l,{className:"border shadow-sm",children:e.jsxs(n,{className:"p-3 text-center",children:[e.jsx(C,{className:"w-6 h-6 text-primary mx-auto mb-1"}),e.jsx("div",{className:"text-xl font-bold text-primary",children:t.filter(e=>{const s=new Date(e.created_at||""),t=new Date;return Math.floor((t.getTime()-s.getTime())/864e5)<=7}).length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"This Week"})]})})]}),ge.length>0&&e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-primary mb-4 flex items-center",children:[e.jsx(k,{className:"w-5 h-5 mr-2"}),"Featured Announcements"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:ge.map(s=>{const t=ne(s);return e.jsxs(l,{className:"group overflow-hidden hover:shadow-lg transition-all cursor-pointer border rounded-lg",onClick:()=>ce(s),children:[t.length>0&&e.jsxs("div",{className:"relative",children:[e.jsx(M,{media:t,title:s.title}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(d,{className:"bg-primary text-white border-0 text-xs",children:[e.jsx(k,{className:"w-2 h-2 inline mr-1"}),"Featured"]})})]}),e.jsxs(n,{className:"p-4",children:[e.jsxs(d,{className:`${ae(s.category)} border text-xs mb-2`,children:[re(s.category)," ",s.category.charAt(0).toUpperCase()+s.category.slice(1)]}),e.jsx("h3",{className:"font-bold text-sm mb-2 line-clamp-2 group-hover:text-primary transition-colors",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:s.content}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(S,{className:"w-3 h-3 mr-1"}),le(s.created_at||"")]})]})]},s.id)})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-primary mb-4",children:"All Announcements"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:pe.map(s=>{const t=ne(s);return e.jsxs(l,{className:"group overflow-hidden hover:shadow-lg transition-all cursor-pointer border rounded-lg",onClick:()=>ce(s),children:[t.length>0&&e.jsx("div",{className:"relative",children:e.jsx(M,{media:t,title:s.title})}),e.jsxs(n,{className:"p-4",children:[e.jsxs(d,{className:`${ae(s.category)} border text-xs mb-2`,children:[re(s.category)," ",s.category.charAt(0).toUpperCase()+s.category.slice(1)]}),e.jsx("h3",{className:"font-bold text-sm mb-2 line-clamp-2 group-hover:text-primary transition-colors",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:s.content}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(S,{className:"w-3 h-3 mr-1"}),le(s.created_at||"")]})]})]},s.id)})})]}),0===_.length&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-muted-foreground mb-6",children:e.jsx(r,{className:"w-20 h-20 mx-auto opacity-50"})}),e.jsx("h3",{className:"text-2xl font-medium text-muted-foreground mb-4",children:"No announcements found"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"all"!==O||V?"No announcements match your current search and filter criteria. Try adjusting your filters.":"There are no announcements at the moment. Check back later!"})]})]}),e.jsx(j,{open:J,onOpenChange:R,children:e.jsxs(b,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[H&&e.jsxs(d,{className:`${ae(H.category)} border`,children:[re(H.category)," ",H.category.charAt(0).toUpperCase()+H.category.slice(1)]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),H&&le(H.created_at||"")]}),(null==H?void 0:H.featured)&&e.jsxs(d,{className:"bg-gradient-to-l from-yellow-400 to-orange-500 text-white",children:[e.jsx(k,{className:"w-3 h-3 inline mr-1"}),"Featured"]})]}),e.jsx(v,{className:"text-2xl mb-4",children:null==H?void 0:H.title})]}),e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>{ee.current&&ee.current.pause(),R(!1),B(null),W(0),Y(!1)},className:"h-8 w-8 p-0",children:e.jsx(i,{className:"h-4 w-4"})})]})}),e.jsx(N,{asChild:!0,children:e.jsxs("div",{children:[H&&(()=>{const s=ne(H);if(0===s.length)return null;const t=s[K];return e.jsx("div",{className:"mb-6 relative bg-black rounded-lg overflow-hidden",children:e.jsxs("div",{className:"w-full h-96 bg-black flex items-center justify-center relative",children:["image"===t.type?e.jsx("img",{src:t.url,alt:`${H.title} - Image ${K+1}`,className:"max-w-full max-h-full object-contain"}):e.jsx("video",{ref:ee,src:t.url,className:"max-w-full max-h-full object-contain",muted:Q,onEnded:xe,onPlay:he,onPause:ue,playsInline:!0}),"video"===t.type&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{variant:"ghost",size:"icon",className:"bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8",onClick:de,children:X?e.jsx($,{className:"w-4 h-4"}):e.jsx(z,{className:"w-4 h-4"})}),e.jsx(c,{variant:"ghost",size:"icon",className:"bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8",onClick:me,children:Q?e.jsx(L,{className:"w-4 h-4"}):e.jsx(F,{className:"w-4 h-4"})})]})})}),"video"===t.type&&!X&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer",onClick:de,children:e.jsx("div",{className:"bg-black/50 rounded-full p-4 hover:bg-black/70 transition-colors",children:e.jsx(z,{className:"w-12 h-12 text-white"})})}),s.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8",onClick:oe,children:e.jsx(A,{className:"w-4 h-4"})}),e.jsx(c,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8",onClick:ie,children:e.jsx(o,{className:"w-4 h-4"})})]}),s.length>1&&e.jsxs("div",{className:"absolute top-2 left-1/2 transform -translate-x-1/2 bg-black/50 text-white px-2 py-1 rounded-full text-xs",children:[K+1," / ",s.length]}),e.jsx("div",{className:"absolute top-2 right-2",children:"video"===t.type&&e.jsx(d,{variant:"secondary",className:"bg-black/50 text-white border-0",children:"VIDEO"})})]})})})(),e.jsx("div",{className:"prose prose-lg max-w-none",children:e.jsx("p",{className:"text-foreground leading-relaxed whitespace-pre-wrap",children:null==H?void 0:H.content})}),"scholarships"===(null==H?void 0:H.category)&&e.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-800 font-medium flex items-center",children:["ðŸ’¡ ",e.jsx("span",{className:"ml-1",children:"Tip: Check eligibility requirements and deadlines before applying."})]})}),"jobs"===(null==H?void 0:H.category)&&e.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-800 font-medium flex items-center",children:["ðŸ’¼ ",e.jsx("span",{className:"ml-1",children:"Remember to update your resume and prepare for the application process."})]})})]})})]})})]})}export{P as default};
